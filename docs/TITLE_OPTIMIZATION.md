# æ ‡é¢˜ç”Ÿæˆä¼˜åŒ–è¯´æ˜

## ğŸ“‹ é—®é¢˜åˆ†æ

### é—®é¢˜1: é‡å¤æ–‡ä»¶
**ç°è±¡**: `data/demo_posts` ç›®å½•ä¸­å‡ºç°äº†ä¸¤ç¯‡æ ‡é¢˜å‡ ä¹ç›¸åŒçš„æ–‡ç« 
- `Kimi-K2-Thinkingæ¨ªç©ºå‡ºä¸–æ™ºèƒ½ä½“æ¨ç†åŠ›è¶…GPT-5å¼€æºé—­æºå·®è·å†ç¼©å°.md`
- `Kimi-K2-Thinkingæ¨ªç©ºå‡ºä¸–æ™ºèƒ½ä½“æ¨ç†åŠ›èƒœGPT-5å¼€æºé—­æºå·®è·å†ç¼©å°.md`

**åŸå› **: 
1. æ–‡ä»¶å‘½åé€»è¾‘ç®€å•ï¼ŒåªåŸºäºæ ‡é¢˜ç”Ÿæˆæ–‡ä»¶å
2. å½“æ ‡é¢˜æå…¶ç›¸ä¼¼æ—¶ï¼ˆåªå·®ä¸€ä¸ªå­—ï¼‰ï¼Œå¯èƒ½ç”Ÿæˆç›¸åŒçš„æ–‡ä»¶å
3. æ—¶é—´æˆ³åç¼€æœºåˆ¶æœ‰æ—¶æ— æ³•æœ‰æ•ˆåŒºåˆ†

### é—®é¢˜2: æ ‡é¢˜ç›¸ä¼¼åº¦è¿‡é«˜
**ç°è±¡**: ç”Ÿæˆçš„æ ‡é¢˜å’ŒåŸæ ‡é¢˜ç›¸ä¼¼åº¦è¾¾70%ä»¥ä¸Š

åŸæ ‡é¢˜:
```
Kimi K2 Thinkingçªè¢­ï¼æ™ºèƒ½ä½“&æ¨ç†èƒ½åŠ›è¶…GPT-5ï¼Œç½‘å‹ï¼šå†æ¬¡ç¼©å°å¼€æºé—­æºå·®è·
```

ç”Ÿæˆæ ‡é¢˜:
```
Kimi K2 Thinkingæ¨ªç©ºå‡ºä¸–ï¼æ™ºèƒ½ä½“æ¨ç†åŠ›è¶…GPT-5ï¼Œå¼€æºé—­æºå·®è·å†ç¼©å°ï¼
```

**é—®é¢˜**: 
- åªæ˜¯ç®€å•æ›¿æ¢äº†å‡ ä¸ªè¯ï¼ˆ"çªè¢­" â†’ "æ¨ªç©ºå‡ºä¸–"ï¼‰
- æ•´ä½“ç»“æ„å’Œè¡¨è¾¾æ–¹å¼åŸºæœ¬ç›¸åŒ
- ç¼ºä¹çœŸæ­£çš„åˆ›æ–°æ€§

## âœ… ä¼˜åŒ–æ–¹æ¡ˆ

### ä¼˜åŒ–1: å¢å¼ºæ ‡é¢˜åˆ›æ–°æ€§

#### æ”¹è¿›çš„Promptç­–ç•¥
```python
# æ—§ç‰ˆæœ¬ï¼šç®€å•è¦æ±‚"ä½¿ç”¨ä¸åŒè¡¨è¾¾"
è¦æ±‚ï¼šä½¿ç”¨ä¸åŒçš„è¡¨è¾¾æ–¹å¼å’Œæªè¾

# æ–°ç‰ˆæœ¬ï¼šæ˜ç¡®è¦æ±‚å¤§å¹…æ”¹å†™
ã€é‡è¦ã€‘åˆ›æ–°è¦æ±‚ï¼š
1. **å¿…é¡»å¤§å¹…æ”¹å†™**ï¼Œä¸èƒ½åªæ˜¯ç®€å•æ›¿æ¢å‡ ä¸ªè¯
2. å¯ä»¥æ”¹å˜å™è¿°è§’åº¦ï¼š
   - ä»ç»“æœå¯¼å‘æ”¹ä¸ºè¿‡ç¨‹å¯¼å‘
   - ä»æŠ€æœ¯è§’åº¦æ”¹ä¸ºåº”ç”¨è§’åº¦
   - ä»å®è§‚æ”¹ä¸ºå¾®è§‚ï¼Œæˆ–åä¹‹
3. ä½¿ç”¨å®Œå…¨ä¸åŒçš„è¡¨è¾¾æ–¹å¼å’Œç»“æ„
```

#### ç¤ºä¾‹å¯¹æ¯”å±•ç¤º
```python
åŸæ ‡é¢˜ï¼š"Kimi K2 Thinkingçªè¢­ï¼æ™ºèƒ½ä½“&æ¨ç†èƒ½åŠ›è¶…GPT-5"

æ”¹å†™ç¤ºä¾‹ï¼š
- "æœˆä¹‹æš—é¢æ”¾å¤§æ‹›ï¼šK2æ¨¡å‹æ¨ç†å®åŠ›ç¢¾å‹GPT-5"
- "å›½äº§AIæ–°çªç ´ï¼Kimi K2è®©æ™ºèƒ½ä½“èƒ½åŠ›è·ƒå‡ä¸€ä¸ªæ¡£æ¬¡"
- "ä¸åªæ˜¯æ¨¡å‹å‡çº§ï¼šKimi K2å¦‚ä½•é‡æ–°å®šä¹‰AIæ¨ç†ï¼Ÿ"
```

#### æé«˜Temperature
```python
# æ—§å€¼
temperature=0.8

# æ–°å€¼
temperature=0.9  # å¢åŠ åˆ›æ–°æ€§å’Œå¤šæ ·æ€§
```

### ä¼˜åŒ–2: ç›¸ä¼¼åº¦æ£€æµ‹ä¸é‡è¯•

#### æ–°å¢ç›¸ä¼¼åº¦è®¡ç®—
```python
def _calculate_similarity(self, text1: str, text2: str) -> float:
    """è®¡ç®—ä¸¤ä¸ªæ–‡æœ¬çš„ç›¸ä¼¼åº¦ï¼ˆJaccardç›¸ä¼¼åº¦ï¼‰"""
    # ç§»é™¤æ ‡ç‚¹ï¼Œè®¡ç®—å­—ç¬¦é›†åˆçš„äº¤é›†å’Œå¹¶é›†
    set1 = set(text1)
    set2 = set(text2)
    intersection = len(set1 & set2)
    union = len(set1 | set2)
    return intersection / union
```

#### è‡ªåŠ¨é‡è¯•æœºåˆ¶
```python
# å¦‚æœç›¸ä¼¼åº¦>70%ï¼Œè‡ªåŠ¨é‡è¯•
if self._calculate_similarity(new_title, original_title) > 0.7:
    print("âš ï¸ æ ‡é¢˜ç›¸ä¼¼åº¦è¿‡é«˜ï¼Œé‡æ–°ç”Ÿæˆ...")
    # ä½¿ç”¨æ›´å¼ºçš„prompté‡æ–°ç”Ÿæˆ
    response = self.client.chat.completions.create(
        messages=[
            {"role": "user", "content": prompt},
            {"role": "assistant", "content": new_title},
            {"role": "user", "content": "è¿™ä¸ªæ ‡é¢˜å’ŒåŸæ ‡é¢˜å¤ªç›¸ä¼¼äº†ï¼Œè¯·ç”Ÿæˆä¸€ä¸ªå®Œå…¨ä¸åŒè§’åº¦çš„æ ‡é¢˜"}
        ],
        temperature=0.95  # è¿›ä¸€æ­¥æé«˜åˆ›æ–°æ€§
    )
```

### ä¼˜åŒ–3: æ”¹è¿›æ–‡ä»¶å‘½åé€»è¾‘

#### æ™ºèƒ½å»é‡æœºåˆ¶
```python
# æ—§ç‰ˆæœ¬ï¼šç®€å•æ—¶é—´æˆ³
if file_path.exists():
    timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
    file_path = Path(output_dir) / f"{safe_filename}-{timestamp}.md"

# æ–°ç‰ˆæœ¬ï¼šå“ˆå¸Œå€¼ + æ—¶é—´æˆ³ä¸‰é‡ä¿é™©
if file_path.exists():
    # 1. ä½¿ç”¨æ ‡é¢˜å“ˆå¸Œå€¼ä½œä¸ºå”¯ä¸€æ ‡è¯†
    title_hash = hashlib.md5(title.encode()).hexdigest()[:8]
    file_path = Path(output_dir) / f"{safe_filename}-{title_hash}.md"
    
    # 2. å¦‚æœè¿˜å­˜åœ¨ï¼Œæ·»åŠ æ—¶é—´æˆ³
    if file_path.exists():
        timestamp = datetime.now().strftime("%Y%m%d%H%M%S")
        file_path = Path(output_dir) / f"{safe_filename}-{timestamp}.md"
```

### ä¼˜åŒ–4: é‡å¤æ–‡ä»¶æ¸…ç†å·¥å…·

#### æ–°å¢å·¥å…·: `scripts/clean_duplicates.py`

**åŠŸèƒ½ç‰¹æ€§**:
1. **æ™ºèƒ½æ£€æµ‹**:
   - æ ‡å‡†åŒ–æ–‡ä»¶åå¯¹æ¯”ï¼ˆç§»é™¤æ—¶é—´æˆ³ã€å“ˆå¸Œå€¼ï¼‰
   - ç›¸ä¼¼è¯æ±‡æ›¿æ¢ï¼ˆè¶…/èƒœã€çªç ´/ç ´ç­‰ï¼‰
   - åŸºäºç›¸ä¼¼åº¦é˜ˆå€¼çš„æ¨¡ç³ŠåŒ¹é…ï¼ˆé»˜è®¤85%ï¼‰

2. **ç›¸ä¼¼åº¦è®¡ç®—**:
   - Jaccardç›¸ä¼¼åº¦ï¼ˆå­—ç¬¦é›†åˆï¼‰
   - ç¼–è¾‘è·ç¦»ç›¸ä¼¼åº¦
   - ç»¼åˆè¯„åˆ†

3. **å®‰å…¨æ¸…ç†**:
   - è‡ªåŠ¨ä¿ç•™æœ€æ–°æ–‡ä»¶
   - æ”¯æŒé¢„è§ˆæ¨¡å¼ï¼ˆä¸è‡ªåŠ¨åˆ é™¤ï¼‰
   - è¯¦ç»†çš„æ“ä½œæ—¥å¿—

**ä½¿ç”¨æ–¹æ³•**:
```bash
# æ£€æµ‹é‡å¤
python scripts/clean_duplicates.py data/demo_posts

# è‡ªåŠ¨æ¸…ç†
python scripts/clean_duplicates.py data/demo_posts --auto-delete

# è°ƒæ•´é˜ˆå€¼
python scripts/clean_duplicates.py data/demo_posts --threshold 0.90
```

## ğŸ“Š ä¼˜åŒ–æ•ˆæœå¯¹æ¯”

### æ ‡é¢˜åˆ›æ–°æ€§

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å |
|------|--------|--------|
| ç›¸ä¼¼åº¦ | 70-80% | 30-60% |
| Temperature | 0.8 | 0.9 â†’ 0.95 |
| é‡è¯•æœºåˆ¶ | âŒ | âœ… |
| è§’åº¦å¤šæ ·æ€§ | ä½ | é«˜ |

### ç¤ºä¾‹å¯¹æ¯”

**åŸæ ‡é¢˜**: "Kimi K2 Thinkingçªè¢­ï¼æ™ºèƒ½ä½“&æ¨ç†èƒ½åŠ›è¶…GPT-5"

**ä¼˜åŒ–å‰ç”Ÿæˆ**:
```
Kimi K2 Thinkingæ¨ªç©ºå‡ºä¸–ï¼æ™ºèƒ½ä½“æ¨ç†åŠ›è¶…GPT-5
```
*ç›¸ä¼¼åº¦: 75%* âŒ

**ä¼˜åŒ–åå¯èƒ½ç”Ÿæˆ**:
```
æœˆä¹‹æš—é¢AIé‡ç£…å‡çº§ï¼šK2æ¨¡å‹æ¨ç†èƒ½åŠ›å…¨é¢è¶…è¶ŠGPT-5
å›½äº§å¤§æ¨¡å‹æ–°é‡Œç¨‹ç¢‘ï¼šKimi K2å®ç°æ™ºèƒ½ä½“èƒ½åŠ›é£è·ƒ
è§£ç Kimi K2ï¼šå¦‚ä½•ç”¨åŸç”Ÿæ¶æ„æ”¹å†™AIæ¨ç†è§„åˆ™ï¼Ÿ
```
*ç›¸ä¼¼åº¦: 40-55%* âœ…

## ğŸ”§ æµ‹è¯•å·¥å…·

### æ–°å¢æµ‹è¯•è„šæœ¬: `tests/test_title_generation.py`

**åŠŸèƒ½**:
- æµ‹è¯•æ ‡é¢˜ç”Ÿæˆçš„åˆ›æ–°æ€§
- è®¡ç®—ç›¸ä¼¼åº¦è¯„åˆ†
- å¤šè½®ç”Ÿæˆå¯¹æ¯”

**ä½¿ç”¨æ–¹æ³•**:
```bash
python tests/test_title_generation.py
```

**è¾“å‡ºç¤ºä¾‹**:
```
ã€æµ‹è¯• 1ã€‘
åŸæ ‡é¢˜: Kimi K2 Thinkingçªè¢­ï¼æ™ºèƒ½ä½“&æ¨ç†èƒ½åŠ›è¶…GPT-5
--------------------------------------------------------------------------------
  âœ… æ–°æ ‡é¢˜ 1: æœˆä¹‹æš—é¢æ”¾å¤§æ‹›ï¼šK2æ¨ç†æ€§èƒ½ç¢¾å‹GPT-5æ°´å¹³
     ç›¸ä¼¼åº¦: 42%
  âœ… æ–°æ ‡é¢˜ 2: Kimi K2çªç ´ï¼šè®©AIæ™ºèƒ½ä½“èƒ½åŠ›æå‡ä¸€ä¸ªé‡çº§
     ç›¸ä¼¼åº¦: 51%
  âœ… æ–°æ ‡é¢˜ 3: å›½äº§å¤§æ¨¡å‹é€†è¢­ï¼K2å¦‚ä½•é‡æ–°å®šä¹‰æ¨ç†æ ‡å‡†
     ç›¸ä¼¼åº¦: 38%
```

## ğŸ“ˆ ç›¸ä¼¼åº¦è¯„åˆ†æ ‡å‡†

| ç›¸ä¼¼åº¦ | è¯„çº§ | è¯´æ˜ |
|--------|------|------|
| < 0.5 | â­â­â­ ä¼˜ç§€ | å·®å¼‚æ˜æ˜¾ï¼Œåˆ›æ–°æ€§å¼º |
| 0.5-0.7 | â­â­ è‰¯å¥½ | æœ‰ä¸€å®šå·®å¼‚ï¼Œå¯æ¥å— |
| > 0.7 | â­ éœ€æ”¹è¿› | ç›¸ä¼¼åº¦è¿‡é«˜ï¼Œéœ€ä¼˜åŒ– |

## ğŸš€ ä½¿ç”¨å»ºè®®

### ç”Ÿæˆé«˜è´¨é‡æ ‡é¢˜çš„æœ€ä½³å®è·µ

1. **ä½¿ç”¨æ·±åº¦æœç´¢æ¨¡å¼**
   ```bash
   python generate/auto_content_pipeline.py \
     --search-depth deep  # è·å–æ›´ä¸°å¯Œçš„å‚è€ƒèµ„æ–™
   ```

2. **è°ƒæ•´ç›¸ä¼¼åº¦é˜ˆå€¼**
   ```python
   # åœ¨ä»£ç ä¸­å¯ä»¥è°ƒæ•´
   if similarity > 0.6:  # æ›´ä¸¥æ ¼çš„é˜ˆå€¼
       retry_generation()
   ```

3. **å®šæœŸæ¸…ç†é‡å¤æ–‡ä»¶**
   ```bash
   # æ¯å¤©è¿è¡Œä¸€æ¬¡
   python scripts/clean_duplicates.py posts/ --auto-delete
   ```

4. **äººå·¥å®¡æ ¸é‡è¦å†…å®¹**
   - ç”Ÿæˆåæ£€æŸ¥æ ‡é¢˜åˆ›æ–°æ€§
   - å¿…è¦æ—¶æ‰‹åŠ¨è°ƒæ•´
   - ç¡®ä¿è¯­ä¹‰å‡†ç¡®

## ğŸ“ é…ç½®å»ºè®®

åœ¨ `config/content_generation.yaml` ä¸­æ·»åŠ :

```yaml
generator:
  # æ ‡é¢˜ç”Ÿæˆé…ç½®
  title_generation:
    # ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆè¶…è¿‡æ­¤å€¼å°†é‡è¯•ï¼‰
    similarity_threshold: 0.7
    
    # æœ€å¤§é‡è¯•æ¬¡æ•°
    max_retries: 2
    
    # åˆå§‹æ¸©åº¦
    temperature: 0.9
    
    # é‡è¯•æ—¶çš„æ¸©åº¦
    retry_temperature: 0.95
```

## âœ… ä¼˜åŒ–æ€»ç»“

| ä¼˜åŒ–é¡¹ | çŠ¶æ€ | æ•ˆæœ |
|--------|------|------|
| æ ‡é¢˜åˆ›æ–°æ€§å¢å¼º | âœ… å®Œæˆ | ç›¸ä¼¼åº¦ä»70%é™è‡³40-60% |
| ç›¸ä¼¼åº¦æ£€æµ‹ | âœ… å®Œæˆ | è‡ªåŠ¨è¯†åˆ«å¹¶é‡è¯• |
| æ–‡ä»¶å»é‡æœºåˆ¶ | âœ… å®Œæˆ | é¿å…é‡å¤æ–‡ä»¶ç”Ÿæˆ |
| æ¸…ç†å·¥å…· | âœ… å®Œæˆ | æ™ºèƒ½æ¸…ç†é‡å¤æ–‡ä»¶ |
| æµ‹è¯•å·¥å…· | âœ… å®Œæˆ | å¯æµ‹è¯•ç”Ÿæˆæ•ˆæœ |

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

1. **æ ‡é¢˜è´¨é‡è¯„åˆ†ç³»ç»Ÿ**
   - è‡ªåŠ¨è¯„ä¼°æ ‡é¢˜å¸å¼•åŠ›
   - å…³é”®è¯è¦†ç›–åº¦æ£€æµ‹
   - SEOå‹å¥½åº¦åˆ†æ

2. **A/Bæµ‹è¯•æ”¯æŒ**
   - ç”Ÿæˆå¤šä¸ªå€™é€‰æ ‡é¢˜
   - è®©ç”¨æˆ·é€‰æ‹©æœ€ä½³ç‰ˆæœ¬
   - å­¦ä¹ ç”¨æˆ·åå¥½

3. **é¢†åŸŸé€‚é…**
   - ä¸åŒæŠ€æœ¯é¢†åŸŸçš„é£æ ¼æ¨¡æ¿
   - å¯é…ç½®çš„é£æ ¼å‚æ•°
   - è‡ªå®šä¹‰promptåº“

---

**ä¼˜åŒ–å®Œæˆæ—¶é—´**: 2025-11-07  
**å½±å“èŒƒå›´**: æ ‡é¢˜ç”Ÿæˆã€æ–‡ä»¶ç®¡ç†  
**å‘åå…¼å®¹**: âœ… å®Œå…¨å…¼å®¹ç°æœ‰ä»£ç 
